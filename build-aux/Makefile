# This file was generated by 'just make-makefile'
.PHONY: all
all:
	cat po/LINGUAS | while read lang; do mkdir -p assets/locale/$$lang/LC_MESSAGES; msgfmt -o assets/locale/$$lang/LC_MESSAGES/de.leopoldluley.Clapgrep.mo po/$$lang.po; done
	cargo --offline fetch --manifest-path Cargo.toml --verbose
	cargo --offline build --package clapgrep-gnome --release
	mkdir -p /app/share/locale
	install -Dm0755 target/release/clapgrep-gnome /app/bin/clapgrep
	install -Dm0755 assets/de.leopoldluley.Clapgrep.desktop /app/share/applications/de.leopoldluley.Clapgrep.desktop
	install -Dm0755 assets/de.leopoldluley.Clapgrep.metainfo.xml /app/share/metainfo/de.leopoldluley.Clapgrep.metainfo.xml
	install -Dm0755 assets/icons/hicolor/scalable/apps/de.leopoldluley.Clapgrep.svg /app/share/icons/hicolor/scalable/apps/de.leopoldluley.Clapgrep.svg
	cp -r assets/locale /app/share/locale
